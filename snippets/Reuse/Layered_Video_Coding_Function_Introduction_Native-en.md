在开发者推拉视频流时，可对编解码进行详细设置，包括开启分层视频编码、开启视频大小流编码、使用硬件编解码和设置编码方式。

### 1.1 分层视频编码

分层视频编码，将码流分为基本层和扩展层，此编码方式可以为不同网络状态的用户提供更好的体验。基本层保证了最基本的视频质量，而扩展层则是对基本层的补充。对于网络较好的用户，可只拉取扩展层获得更好的体验，对于网络状态较差的用户，只拉取基本层可以保证基本的视频质量。

当开发者在连麦或混流业务中出现以下情况时，推荐使用分层视频编码功能：

- 需要不同终端显示不同质量的视频流。
- 需要在较差的网络环境中保持连麦的流畅。
- 需要根据网络状态自适应拉取视频流的质量。


<div class="mk-hint">


分层视频编码使用的是 ZEGO 的私有协议，拉流端只有从 ZEGO 服务器上才能拉取到不同分层的视频流。

</div>

### 1.2 视频大小流编码

视频大小流编码与分层视频编码的共同作用是将码流分为大分辨率类型和小分辨率类型。

最显著的差异是分层视频编码使用一个编码器编出基本层和扩展层的码流，视频大小流编码使用两个编码器编出基本层和扩展层的码流。

二者的具体差异、优缺点请查看本文第6部分的“常见问题”，开发者可以结合二者差异和业务具体诉求，选择分层视频编码还是视频大小流编码。

<div class="mk-hint">

视频大小流编码使用的是 ZEGO 的私有协议，拉流端只有从 ZEGO 服务器上才能拉取到不同分层的视频流。

</div>

### 1.3 硬件编解码

开发者可选择开启硬件编码和硬件解码。开启硬件编解码后会使用 GPU 进行编解码，降低 CPU 使用率。若某些机型在推或拉大分辨率音视频流时设备发热严重，可开启硬件编解码。

### 1.4 视频编码方式

开发者可进行视频编码配置，使不同端之间进行编码对齐，进而实现多端互通。

使用场景：
- 一般情况下使用默认编码即可。
- 在同等分辨率帧率的情况下，需要降低码率，可以采用 H.265。
- 在需要与小程序互通时，需要使用 H.264。
