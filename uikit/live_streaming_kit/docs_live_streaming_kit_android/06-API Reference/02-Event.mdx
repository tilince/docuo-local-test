# Event


## ZegoUIKitPrebuiltLiveStreamingService.PK.Event

### PKListener

#### onPKStarted

This callback is triggered when the PK starts.

<CodeGroup>
```java Prototype
void onPKStarted();
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onPKStarted() {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onPKEnded

This callback is triggered when the PK ends.

<CodeGroup>
```java Prototype
void onPKEnded();
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onPKEnded() {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onIncomingPKBattleRequestReceived

This callback is triggered when the host receives a PK battle request.

<CodeGroup>
```java Prototype
void onIncomingPKBattleRequestReceived(String requestID, ZegoUIKitUser anotherHostUser,String anotherHostLiveID, String customData);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onIncomingPKBattleRequestReceived(String requestID, ZegoUIKitUser anotherHostUser,String anotherHostLiveID, String customData) {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onIncomingPKBattleRequestTimeout

This callback is triggered when a PK request is received, but no response is made before the request times out.

<CodeGroup>
```java Prototype
void onIncomingPKBattleRequestTimeout(String requestID, ZegoUIKitUser anotherHostUser);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onIncomingPKBattleRequestTimeout(String requestID, ZegoUIKitUser anotherHostUser) {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onOutgoingPKBattleRequestTimeout

This callback is triggered when a PK battle request is sent but no response is received before the timeout.

<CodeGroup>
```java Prototype
void onOutgoingPKBattleRequestTimeout(String requestID, ZegoUIKitUser anotherHostUser);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onOutgoingPKBattleRequestTimeout(String requestID, ZegoUIKitUser anotherHostUser) {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onIncomingPKBattleRequestCanceled

This callback is triggered when the sender cancels the PK battle request after receiving it.

<CodeGroup>
```java Prototype
void onIncomingPKBattleRequestCanceled(String requestID, ZegoUIKitUser anotherHostUser, String customData);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onIncomingPKBattleRequestCanceled(String requestID, ZegoUIKitUser anotherHostUser, String customData) {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onOutgoingPKBattleRequestAccepted

This callback is triggered when the PK battle request sent by the host is accepted by another host.

<CodeGroup>
```java Prototype
void onOutgoingPKBattleRequestAccepted(String requestID, ZegoUIKitUser anotherHostUser);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onOutgoingPKBattleRequestAccepted(String requestID, ZegoUIKitUser anotherHostUser) {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onOutgoingPKBattleRequestRejected

This callback is triggered when the PK battle request sent by the host is rejected by another host. The rejection reason can be any enumeration of `ZegoLiveStreamingPKBattleRejectCode`, including `HOST_REJECT`, `USER_NOT_HOST`, `IN_PK`, `LIVE_NOT_STARTED`, `ALREADY_SEND`, `ALREADY_RECEIVED`.

<CodeGroup>
```java Prototype
void onOutgoingPKBattleRequestRejected(int reason, ZegoUIKitUser anotherHostUser);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onOutgoingPKBattleRequestRejected(int reason, ZegoUIKitUser anotherHostUser) {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onPKUserDisConnected

This callback is triggered when the other host disconnects from the PK battle for more than 5 seconds.

<CodeGroup>
```java Prototype
void onPKUserDisConnected(String userID, boolean disconnected);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onPKUserDisConnected(String userID, boolean disconnected) {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onOtherHostCameraOpen

When PK, the callback for the status of other hosts opening or closing the camera.

<CodeGroup>
```java Prototype
void onOtherHostCameraOpen(String userID, boolean open);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onOtherHostCameraOpen(String userID, boolean open) {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onOtherHostMicrophoneOpen

When PK, the callback for the status of other hosts opening or closing the microphone.

<CodeGroup>
```java Prototype
void onOtherHostMicrophoneOpen(String userID, boolean open);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onOtherHostMicrophoneOpen(String userID, boolean open) {
        //...  
    }
    //...
});
```
</CodeGroup>

#### onOtherHostMuted

When PK, the callback for receiving the mute status after muting other hosts.

<CodeGroup>
```java Prototype
void onOtherHostMuted(String userID, boolean muted);
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.pk.events.addPKListener(new PKListener() {
    @Override
    public void onOtherHostMuted(String userID, boolean muted) {
        //...  
    }
    //...
});
```
</CodeGroup>


## ZegoUIKitPrebuiltLiveStreamingService.Common.Event

### RoleChangedListener

This callback is triggered when there is a change in the role of the current user.

<CodeGroup>
```java Prototype
public interface RoleChangedListener {

    void onRoleChanged(ZegoLiveStreamingRole liveStreamingRole);
}
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.common.events.addRoleChangedListener(new RoleChangedListener() {
    @Override
    public void onRoleChanged(ZegoLiveStreamingRole liveStreamingRole){
        //...  
    }
    //...
});
```
</CodeGroup>

### ZegoInRoomMessageListener

This callback is used to listen for room messages. It is triggered when receiving or sending room messages.

<CodeGroup>
```java Prototype
public interface ZegoInRoomMessageListener {
    // Receive messages sent by others in the room
    void onInRoomMessageReceived(List<ZegoInRoomMessage> messageList);
    // The state of the message sent by oneself changes
    void onInRoomMessageSendingStateChanged(ZegoInRoomMessage inRoomMessage);
}
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.common.events.addInRoomMessageListener(new ZegoInRoomMessageListener() {
    @Override
    public void onInRoomMessageReceived(List<ZegoInRoomMessage> messageList){
        //...  
    }

    @Override
    public void onInRoomMessageSendingStateChanged(ZegoInRoomMessage inRoomMessage){
        //...  
    }
    //...
});
```
</CodeGroup>

### ZegoBarrageMessageListener

This callback is triggered when receiving barrage messages in the room.

<CodeGroup>
```java Prototype
public interface ZegoBarrageMessageListener {

    void onIMRecvBarrageMessage(String roomID, ArrayList<ZegoBarrageMessageInfo> messageList);
}
```

```java Example
ZegoUIKitPrebuiltLiveStreamingService.common.events.addBarrageMessageListener(new ZegoBarrageMessageListener() {
    @Override
    public void onIMRecvBarrageMessage(String roomID, ArrayList<ZegoBarrageMessageInfo> messageList){
        //...  
    }
    //...
});
```
</CodeGroup>



## ZegoUIKitPrebuiltLiveStreamingConfig
### ZegoLiveStreamingEndListener

#### onLiveStreamingEnded
This callback is triggered when the host ends the live streaming to notify the audience.

<CodeGroup>
```java Prototype
void onLiveStreamingEnded();
```

```java Example
ZegoUIKitPrebuiltLiveStreamingConfig config;
//...
config.zegoLiveStreamingEndListener = new ZegoLiveStreamingEndListener() {
    @Override
    public void onLiveStreamingEnded() {
    
    }
};
```
</CodeGroup>

### ZegoLeaveLiveStreamingListener

#### onLeaveLiveStreaming
This callback is triggered when the user clicks the exit button.

<CodeGroup>
```java Prototype
void onLeaveLiveStreaming();
```

```java Example
ZegoUIKitPrebuiltLiveStreamingConfig config;
//...
config.leaveLiveStreamingListener = new ZegoLeaveLiveStreamingListener() {
    @Override
    public void onLeaveLiveStreaming() {
    
    }
};
```
</CodeGroup>

### ZegoMeRemovedFromRoomListener

#### onMeRemovedFromRoom
This callback is triggered when the user is kicked out of the room by the server command or the ZegoUIKit.removeUserFromRoom() method.

<CodeGroup>
```java Prototype
void onMeRemovedFromRoom();
```

```java Example
ZegoUIKitPrebuiltLiveStreamingConfig config;
//...
config.removedFromRoomListener = new ZegoMeRemovedFromRoomListener() {
    @Override
    public void onMeRemovedFromRoom() {
    
    }
};
```
</CodeGroup>
